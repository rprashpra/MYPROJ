<!DOCTYPE html>
<html>
<head>
	<title>Token</title>
	<meta charset="utf-8">
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
    <style>
       body {
  font: 14px Georgia, serif;
  text-align: center;
}

h1 {
  font: bold 20px system-ui, Helvetica, Sans-Serif;
}

input[type="number"] {
  padding: 10px;
  color: #999;
  font: bold 20px system-ui, Helvetica, Sans-Serif;
  width: 60px;
  margin: 10px 0;
}
#randomnumber {
  font-size: 80px;
}
    </style>
</head>
<body>
<form>
  <button onclick="getToken()">Token</button>
      <? php $sql="1"; ?>
            <p id="b"></p>
    <script>
       function getToken(){
              var prev_id = "<?php echo $sql?>"
              var cmpstring = prev_id.toString().slice(0, 6);
              var today = new Date().toISOString().slice(8,12);
                today = today.toString();
                    today = today.replaceAll("-", "");
                    var new_id;
                   if (today.localeCompare(cmpstring) == 0) {
                      new_id = parseInt(prev_id) + 1;
                    }
                    else if (today.localeCompare(cmpstring) == 1) {
                      new_id = parseInt(today.concat('1000'));                               
                    }
                  document.getElementById("b").innerHTML = new_id;
              }
      </script>
</form>
</body>
</html>